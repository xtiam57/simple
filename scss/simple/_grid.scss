@function column-width($columnNumber, $totalColumns: $total-columns) {
  @return percentage($columnNumber / $totalColumns);
}

@mixin make-column($column) {
  width: column-width($column);
}

@mixin make-columns($size) {
  .column,
  .columns {
    &.#{$size}-centered {
      margin-#{$default-float}: auto;
      margin-#{$opposite-direction}: auto;
      float: none !important;
    }

    &.#{$size}-uncentered {
      margin-#{$default-float}: 0;
      margin-#{$opposite-direction}: 0;
      float: $default-float !important;
    }

    &.#{$size}-uncentered.opposite {
      float: $opposite-direction;
    }
  }

  @for $i from 1 through $total-columns {
    .#{$size}-#{$i} { @include make-column($column: $i); }
  }

  @for $i from 1 through $total-columns - 1 {
    .#{$size}-offset-#{$i} { margin-#{$default-float}: column-width($i); }

    .#{$size}-push-#{$i} {
      #{$default-float}: column-width($i);
      #{$opposite-direction}: auto;
    }

    .#{$size}-pull-#{$i} {
      #{$opposite-direction}: column-width($i);
      #{$default-float}: auto;
    }
  }
}

@mixin make-row($nested: false) {
  margin-top: 0;
  margin-bottom: 0;

  @if $nested == false {
    width: 100%;
    margin-#{$default-float}: auto;
    margin-#{$opposite-direction}: auto;
  }
  @else {
    width: auto;
    margin-#{$default-float}: rem($column-gutter / -2);
    margin-#{$opposite-direction}: rem($column-gutter / -2);
  }

  // Clearfix for all rows
  @include clearfix();
}

.row {
  @include make-row();

  &.collapse {
    > .column,
    > .columns  {
      padding-left: 0;
      padding-right: 0;

      .row {
        margin-left: 0;
        margin-right: 0;
      }
    }
  }

  .row {
    @include make-row($nested: true);
  }
}

.column,
.columns {
  padding-right: rem($column-gutter / 2);
  padding-left: rem($column-gutter / 2);
  float: $default-float;
  overflow: hidden;
}

.container {
  width: 100%;
  overflow: hidden;
  padding-left: rem($column-gutter / 2);
  padding-right: rem($column-gutter / 2);

  .row {
    @include make-row($nested: true);
  }

  &.centered {
    margin-#{$default-float}: auto;
    margin-#{$opposite-direction}: auto;
    float: none !important;
  }

  &.uncentered {
    margin-#{$default-float}: 0;
    margin-#{$opposite-direction}: 0;
    float: $default-float !important;
  }

  &.uncentered.opposite {
    float: $opposite-direction;
  }

  @media #{$medium-up} {
    width: $container-medium;
  }

  @media #{$large-up} {
    width: $container-large;
  }

  @media #{$xlarge-up} {
    width: $container-xlarge;
  }
}




@media #{$small-up} {
  @include make-columns($size: small);
}

@media #{$medium-up} {
  @include make-columns($size: medium);
}

@media #{$large-up} {
  @include make-columns($size: large);
}

@media #{$xlarge-up} {
  @include make-columns($size: xlarge);
}

@media #{$xxlarge-up} {
  @include make-columns($size: xxlarge);
}
